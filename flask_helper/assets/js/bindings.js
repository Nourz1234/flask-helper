!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var o in r)("object"==typeof exports?exports:t)[o]=r[o]}}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function r(t){return new Promise((e=>setTimeout(e,t)))}function o(t){let e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function s(t,e){return r=t.dataset,e.jsName in r;var r}function n(t,e){return t.dataset[e.jsName]}t.r(e),t.d(e,{createElementFromHTML:()=>o,runWithContext:()=>p,sleep:()=>r});class a{jsName;htmlAttribute;constructor(t){this.htmlAttribute="data-e-"+t,this.jsName="e"+t.replace(/(?:^|-)(\w)/g,((t,e)=>e.toUpperCase()))}}class i{static onClick=new a("onclick");static onSubmit=new a("onsubmit");static onInput=new a("oninput");static onChange=new a("onchange");static name=new a("name");static scope=new a("scope");static progress=new a("progress");static progressTarget=new a("progress-target")}class l{constructor(t){this.vars={};let e=[],r=t.closest(`[${i.scope.htmlAttribute}]`);for(;r;)e.push(r),r=r.parentElement?.closest(`[${i.scope.htmlAttribute}]`);e.push(document);for(let t of e.reverse()){let e=Array.from(t.querySelectorAll(`[${i.name.htmlAttribute}]`));t!==document&&t.matches(`[${i.name.htmlAttribute}]`)&&e.push(t);for(let t of e.reverse())this.vars[n(t,i.name)]=t}}}class c{static _states=[];static pushContext(t){let e={...t.vars,ctx:t.vars},r={};for(let[t,o]of Object.entries(e)){Object.prototype.hasOwnProperty(globalThis,t)?r[t]=globalThis[t]:r[t]=void 0;try{globalThis[t]=o}catch{}}this._states.push(r)}static popContext(){let t=this._states.pop();if(t)for(let[e,r]of Object.entries(t))try{void 0===r?delete globalThis[e]:globalThis[e]=r}catch{}}}const u=(async()=>{}).constructor;async function p(t,e={}){let{target:r,args:o}=e;r=r||document.body;let a=new l(r),p=function(t,e){let r=[];if(s(t,i.progress)){let o=t;if(s(t,i.progressTarget)){let r=n(t,i.progressTarget);o=e[r]||o}let a=new Set(n(t,i.progress).split(",").map((t=>t.trim())));for(let t of a)"disable"===t&&(o.disabled=!0,r.push((()=>o.disabled=!1)))}return()=>r.forEach((t=>t()))}(r,a);try{return c.pushContext(a),o=o||[],t instanceof u?await t(...o):t(...o)}finally{c.popContext(),p()}}function f(t,e){document.addEventListener(t,(async t=>{let r=t.target;if(r=r.closest(`[${e.htmlAttribute}]`),!r)return;let o=n(r,e),s=window[n(r,e)];if(!s)throw new Error(`Handler '${o}' not found`);return await p(s,{target:r,args:[t]})}))}return f("submit",i.onSubmit),f("click",i.onClick),f("input",i.onInput),f("change",i.onChange),e})()));
//# sourceMappingURL=bindings.js.map